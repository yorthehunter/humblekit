/*
===================================================================
What you need to know about this file:
===================================================================

Buttons are generated through the use of Sass variables and mixins.
The mixins are available to extend (if you can make sense of them)
if you want to add more button styles or sizes.

All of the basic button sizes and styles are generated by calling
the respective mixins with parameters defined as Sass lists (arrays).
For odd situations (like default buttons or link buttons) it was
easier to code separately instead of complicating the mixins.

TODO: Can this be DRYer?

*/


/*doc
---
title: "Customizing buttons"
name: buttons-variables
category: modules
---
```html_example

<pre>
<code class="language-css">
$btn-font-weight:      $font-weight-thin !default;
$btn-border-radius:    0.25rem !default;
$btn-shadow:           inset 0 2px 6px rgba(0,0,0,0.3) !default;

$btn-bg-default:       $btn-gray !default;
$btn-color-default:    white !default;
$btn-border-default:   darken($btn-bg-default, 10%) !default;

$btn-bg-primary:       $btn-blue !default;
$btn-color-primary:    white !default;
$btn-border-primary:   darken($btn-bg-primary, 10%) !default;

$btn-bg-secondary:     $btn-violet !default;
$btn-color-secondary:  white !default;
$btn-border-secondary: darken($btn-bg-secondary, 10%) !default;

$btn-bg-tertiary:      $btn-blue-soft !default;
$btn-color-tertiary:   white !default;
$btn-border-tertiary:  darken($btn-bg-tertiary, 10%) !default;

$btn-bg-link:          $btn-blue-light !default;
$btn-bg-link-dark:     rgba(255,255,255,0.15) !default;
$btn-border-link:      rgba($btn-blue-light,0.0) !default;

$btn-hover-adjustment: 8% !default;
$btn-border-width:     1px !default;
$btn-transition-speed: 0.2s !default;

--- Optional customizations ---
$btn-inset-option:       true !default;
$btn-border-option:      true !default;
$btn-radius-option:      true !default;
$btn-text-shadow-option: true !default;
$btn-transition-option:  true !default;
$btn-hover-bg-option:    true !default;
$btn-mobile-full-width:  true !default;
</code>
</pre>

```
*/

$base-btn-sizes: ("-xs", "extra-small", 1.3rem),
                 ("-sm", "small",       2rem),
                 ("-md", "medium",      3rem),
                 ("-lg", "large",       4rem),
                 ("-xl", "extra-large", 5rem);

$btn-names: ("primary",   $btn-bg-primary,   $btn-color-primary,   $btn-border-primary),
            ("secondary", $btn-bg-secondary, $btn-color-secondary, $btn-border-secondary),
            ("tertiary",  $btn-bg-tertiary,  $btn-color-tertiary,  $btn-border-tertiary);


/* Button Options */

$btn-inset-option:       true !default;
$btn-border-option:      true !default;
$btn-radius-option:      true !default;
$btn-text-shadow-option: true !default;
$btn-transition-option:  true !default;
$btn-hover-bg-option:    true !default;
$btn-mobile-full-width:  true !default;


/*doc
---
title: Buttons
name: buttons
category: modules
---
```html_example

<a href="#" class="btn btn-xl">xl Button</a>
<a href="#" class="btn btn-lg">lg Button</a>
<a href="#" class="btn">md Button</a>
<a href="#" class="btn btn-sm">sm Button</a>
<a href="#" class="btn btn-xs">xs Button</a>
<hr />
<h2 class="h4">Button colors</h2>
<a href="#" class="btn btn-primary">Primary</a>
<a href="#" class="btn btn-secondary">Secondary</a>
<a href="#" class="btn btn-tertiary">Tertiary</a>
<a href="#" class="btn btn-link">Link Button</a>
<hr />
<h2 class="h4">Outline buttons</h2>
<a href="#" class="btn btn-primary btn-outline">Primary</a>
<a href="#" class="btn btn-secondary btn-outline">Secondary</a>
<a href="#" class="btn btn-tertiary btn-outline">Tertiary</a>
<a href="#" class="btn btn-link btn-outline">Link Button</a>
<hr />
<h2 class="h4">Button active/current state</h2>
<a href="#" class="btn btn-primary current">Primary</a>
<a href="#" class="btn btn-secondary active">Secondary</a>
<a href="#" class="btn btn-tertiary current">Tertiary</a>
<a href="#" class="btn btn-link active">Link Button</a>
<hr />
<div style="background-color: #666; padding: 10px;">
  <a href="#" class="btn btn-link btn-link-dark light">Link Button - Dark Background</a>
</div>
<hr />
<h2 class="h4">Form inputs using the same classes</h2>
<button class="btn btn-sm btn-primary">button</button>
<input type="button" value="input button" class="btn btn-sm btn-secondary">
<input type="submit" value="submit" class="btn btn-sm btn-link">

```
*/

@mixin btn_style($style, $bg, $color, $border) {
  %btn-#{$style},
  .btn-#{$style} {
    background-color: $bg;
    color: $color;
    border-color: $border;

    &:hover {
      @if $btn-hover-bg-option {
        background-color: lighten($bg, $btn-hover-adjustment);
      }
      border-color: lighten($bg, $btn-hover-adjustment);
    }

    &:active,
    &.current,
    &.active {
      color: $color;
      background-color: darken($bg, 10%);
    }

    &:hover,
    &:visited {
      color: $color;
    }
  }
}

@mixin btn_size($size, $longname, $lh) {
  %#{$btn-class-prefix}#{$size},
  .#{$btn-class-prefix}.#{$btn-class-prefix}#{$size} {
    @if $btn-border-option {
      line-height: calc(#{$lh} - (2 * #{$btn-border-width}));
    } @else {
      line-height: $lh;
    }
    height: auto;

    &:not([class^="px"]):not([class*="px"]) {
      padding-left:  $lh;
      padding-right: $lh;
    }

    @if $longname == "large" {
      @extend %f4;
    } @else if $longname == "extra-large" {
      @extend %f3;
    } @else if $size == "" {
      @extend %f-md;
    } @else {
      @extend %f#{$size};
    }

    @if $longname == "extra-small" {
      margin-top: 0.35rem;
      margin-bottom: 0.35rem;
    }
  }
}

%#{$btn-class-prefix},
.#{$btn-class-prefix} {
  display: inline-block;
  font-weight: $btn-font-weight;
  text-align: center;
  vertical-align: top;
  background-color: $btn-bg-default;
             color: $btn-color-default;
  border-style: solid;
  border-color: $btn-border-default;
  text-decoration: none;
  box-sizing: border-box;
  cursor: pointer;
  margin-bottom: 0;
  @extend %f-md;

  @if $btn-border-option { border-width: $btn-border-width; }

  @if $btn-radius-option { border-radius: $btn-border-radius; }

  @if $btn-transition-option { transition: all $btn-transition-speed; }

  &:hover {
    @if $btn-hover-bg-option {
      background-color: lighten($btn-bg-default, $btn-hover-adjustment);
    }
    border-color: lighten($btn-border-default, $btn-hover-adjustment);
    color: $btn-color-default;
    @if $btn-text-shadow-option {
      text-shadow: 0 0 15px white, 0 0 30px white;
    }
  }
  &:active,
  &.current,
  &.active {
    @if $btn-inset-option { box-shadow: $btn-shadow; }
    background-color: darken($btn-bg-default, 10%);
  }
  &:active,
  &:visited {
    color: $btn-color-default;
  }

  &.disabled,
  &[disabled] {
    cursor: not-allowed;
    pointer-events: none;
    opacity: 0.45;
    box-shadow: none;
  }

  &:focus {
    outline: 0;
  }
}

// Style buttons that don't have an explicit size the same as 'btn-md'
@include btn_size("", "base", 3rem);

@each $size in $base-btn-sizes {
  @include btn_size(nth($size, 1), nth($size, 2), nth($size, 3))
}

@each $name in $btn-names {
  @include btn_style(nth($name, 1), nth($name, 2), nth($name, 3), nth($name, 4));
}

%#{$btn-class-prefix}-link,
.#{$btn-class-prefix}-link {
  background-color: transparent;
  color: $link-color;
  border-color: $btn-border-link;

  &:visited {
    color: $link-visited-color;
  }
  &:hover {
    background-color: $btn-bg-link;
    color: $link-hover-color;
    border-color: lighten($btn-border-link, $btn-hover-adjustment);
  }
  &:active {
    color: $link-active-color;
  }

  &%#{$btn-class-prefix}-link-dark,
  &.#{$btn-class-prefix}-link-dark {
    &:hover {
      background-color: $btn-bg-link-dark;
    }
  }

  &.current,
  &.active {
    background-color: $btn-bg-link;
  }
}

// By default, expand buttons to full-width of their parent at xs breakpoint
@if $btn-mobile-full-width == true {
  @include at_breakpoint(xs) {
    .#{$btn-class-prefix} {
      width: 100%;
      margin-left: 0 !important;
      margin-right: 0 !important;
      &:not([class^="px"]):not([class*="px"]):not([class^="py"]):not([class*="py"]) {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
    }
  }
}

%#{$btn-class-prefix}-outline,
.#{$btn-class-prefix}-outline {

  border-color: rgba(white, 0.5);
  color:        rgba(white, 0.5);
  background-color: transparent;
  @extend %border-sm;
  font-weight: $font-weight-base;

  &.#{$btn-class-prefix}-primary {
    &:hover {
      color: $btn-bg-primary;
    }
  }
  &.#{$btn-class-prefix}-secondary {
    &:hover {
      color: $btn-bg-secondary;
    }
  }
  &.#{$btn-class-prefix}-tertiary {
    &:hover {
      color: $btn-bg-tertiary;
    }
  }

  &:hover {
    border-color:     transparent;
    background-color: white;
    color:            $btn-bg-default;
  }
}

/*doc
---
title: "Button groups"
name: buttons_groups
category: modules
---
```html_example

<div class="btn-group mr1">
  <a href="#" class="btn btn-sm">Button</a>
  <a href="#" class="btn btn-sm current">Button</a>
  <a href="#" class="btn btn-sm">Button</a>
</div>

<div class="btn-group">
  <a href="#" class="btn btn-tertiary">Button</a>
  <a href="#" class="btn btn-tertiary">Button</a>
</div>

```
*/

.#{$btn-class-prefix}-group {
  display: inline-block;
  vertical-align: top;
  font-size: 0; // Fixes inline-block spacing issue

  .#{$btn-class-prefix} + .#{$btn-class-prefix},
  .#{$btn-class-prefix} + .#{$btn-class-prefix}-group,
  .#{$btn-class-prefix}-group + .#{$btn-class-prefix},
  .#{$btn-class-prefix}-group + .#{$btn-class-prefix}-group {
    margin-left: -1px;
  }

  & > .#{$btn-class-prefix}:not(:first-child):not(:last-child) {
    border-radius: 0;
  }

  & > .#{$btn-class-prefix}:first-child {
    margin-left: 0;

    &:not(:last-child) {
      border-bottom-right-radius: 0;
      border-top-right-radius: 0;
    }
  }

  & > .#{$btn-class-prefix}:last-child {
    &:not(:first-child) {
      border-bottom-left-radius: 0;
      border-top-left-radius: 0;
    }
  }
}